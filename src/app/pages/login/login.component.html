<div class="login-container flex min-h-screen bg-base-100">

  <div class="login-form-section flex-1 flex items-center justify-center p-8 relative">
    <div class="form-container w-full max-w-md">
      <div class="welcome-header mb-12 text-center">
        <h1 class="welcome-title text-4xl font-extrabold">
          <span class="block text-3xl font-light text-base-content/80 mb-2">Bienvenido a</span>
          <span class="block text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-primary to-primary-focus">CourseConnect</span>
        </h1>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form flex flex-col gap-6">

        <div class="form-control w-full">
          <label class="label">
            <span class="label-text">Email</span>
          </label>
          <input
            type="email"
            formControlName="email"
            placeholder="ejemplo@courseconnect.com"
            class="input input-bordered w-full"
            [class.input-error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          />
          <label class="label" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
            <span class="label-text-alt text-error">Por favor, ingresa un email válido.</span>
          </label>
        </div>

        <div class="form-control w-full">
          <label class="label">
            <span class="label-text">Contraseña</span>
          </label>
          <div class="relative">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="••••••••"
              class="input input-bordered w-full"
              [class.input-error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            />
            <button type="button" class="btn btn-ghost btn-sm absolute right-2 top-1/2 -translate-y-1/2" (click)="togglePassword()">
              <span class="text-xl">{{ showPassword ? '🙈' : '👁️' }}</span>
            </button>
          </div>
          <label class="label" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <span class="label-text-alt text-error">La contraseña es requerida.</span>
          </label>
        </div>

        <div class="form-options flex justify-between items-center mt-2 mb-2">
          <label class="label cursor-pointer gap-2">
            <span class="label-text">Recordar mi sesión</span>
            <input type="checkbox" class="checkbox checkbox-primary" />
          </label>
          <a class="link link-primary link-hover text-sm" (click)="toggleForgotPasswordModal(true)">
            ¿Olvidaste tu contraseña?
          </a>
        </div>

        <div *ngIf="loginError" class="alert alert-error">
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            <span>{{ loginError }}</span>
        </div>

        <button type="submit" class="btn btn-primary btn-lg mt-4" [disabled]="loginForm.invalid || isLoading">
          <span *ngIf="isLoading" class="loading loading-spinner"></span>
          {{ isLoading ? 'Iniciando...' : 'INICIAR SESIÓN' }}
        </button>

        <div class="demo-section mt-8 pt-6 border-t border-base-300">
          <p class="text-sm text-base-content/70 mb-4 text-center">Credenciales de prueba:</p>
          <div class="demo-buttons flex gap-2 justify-center flex-wrap">
            <button type="button" class="btn btn-outline btn-sm" (click)="quickLogin('Admin')">👨‍💼 Admin</button>
            <button type="button" class="btn btn-outline btn-sm" (click)="quickLogin('Estudiante')">👨‍🎓 Estudiante</button>
            <button type="button" class="btn btn-outline btn-sm" (click)="quickLogin('Instructor')">👨‍🏫 Instructor</button>
          </div>
        </div>
      </form>

      <div class="signup-link text-center mt-8 pt-6 border-t border-base-300">
        <p class="text-base-content/80 text-sm">
          ¿No tienes una cuenta?
          <a routerLink="/register" class="link link-primary font-semibold">Regístrate</a>
        </p>
      </div>
    </div>
  </div>

  <div class="illustration-section flex-1 relative overflow-hidden hidden lg:block">
      </div>
</div>


<div *ngIf="showForgotPasswordModal" class="modal modal-open">
  <div class="modal-box">
    <h3 class="font-bold text-lg">Recuperar Contraseña</h3>
    <p class="py-4">Ingresa tu correo electrónico para enviarte instrucciones.</p>
    
    <div>
      <div class="form-control w-full">
        <label class="label"><span class="label-text">Correo Electrónico</span></label>
        <input type="email" placeholder="tu@email.com" class="input input-bordered w-full" />
      </div>

      <div class="modal-action">
        <button type="button" class="btn btn-ghost" (click)="toggleForgotPasswordModal(false)">Cancelar</button>
        <button type="button" class="btn btn-primary">Enviar</button>
      </div>
    </div>
  </div>
</div>